# АВС ИДЗ 4
Хан Виктория БПИ226 
Вариант 17

## Условие
Задача о капиталистической гостинице. В гостинице 10 номеров с ценой 2000 УЕ, 10 номеров с ценой 4000 УЕ и 5 номеров с ценой 6000 УЕ. Клиент, зашедший в гостиницу, обладает некоторой (случайной) суммой и получает номер по своим финансовым возможностям, если тот свободен. При наличии денег и разных по стоимости номеров он выбирает случайный номер. Если доступных по цене свободных номеров нет, клиент уходит искать ночлег в другое место. Клиенты порождаются динамически и уничтожаются при освобождении номера или уходе из гостиницы при невозможности оплаты. Создать многопоточное приложение, моделирующее работу гостиницы. Каждого клиента и гостиницу (точнее ее администратора) моделировать отдельным потоком.

Уточнения: Пользователь воодит количество секунд, которое отель будет работать. Также вводит количество секунд, за которое генерируется новый клиент. Если клиент бронирует комнату, он остается там на 20 секунд, а затем уходит (то есть допустим, что сутки это 20 секунд для менее времезатратного тестирования). 
Если у клиента достаточно денег на более чем один тип номеров, то он случайно выбирает из данных вариантов. Затем проверяем на наличие номера этого типа. Если есть свободные комнаты, посетитель может занять ее. В ином случае гость уходит из отеля. 
А еще у каждого клиента генерируется рандомная сумма денег от 1 до 10000. 

## Решение
В самом начала инициализируются 25 mutex, которые олицетворяют комнаты в отеле (rooms). А также mutex, который связан с работой администрации (hotel_work). Запускается цикл, где сначала создается поток администрации (admin). Отель начинает работать, что отображается на состоянии переменной working, и блокируется mutex hotel work на количество секунд, введенное пользователем. В этом же цикле генерируются гости отеля каждые несколько секунд, пока working = true. Так как лишь первый инициированный администратор имеет доступ к hotel_work, который блокирует доступ к измнению переменной working, то другие инициализации администратора ждут, когда первый разблокирует mutex, то есть не влияют на работу программы.
Прописаны три типа комнат: за 2000 (1), за 4000 (2) и за 6000 (3). В массиве rooms, первые 10 комнат первого типа [0..9], вторые 10 - второго типа [10..19], последние 5 - третьего типа [20..24].   
При генерации клиента, инициируется отдельный поток. У гостя сначала рандомно генерируется количество денег (от 1 до 10000), затем roomType определяется по принципу: если у гостя >= 6000 денег, то он рандомно выбирает тип среди всех трех; если между 6000 и 4000, то рандомно выбирает тип между первым и вторым; если между 2000 и 4000, то может позволить себе только комнату первого типа; если меньше 2000 денег, то должен покинуть отель. 
После того, как roomType установлен, система проверяет наличие свободных комнат данного типа. Если есть свободные комнаты, то клиент его занимает. Если нет свободных комнат, клиент покидает отель. Каждый раз мы проходимся по определенному диапазону комнат в массиве rooms.
Когда администрация закрывает отель (working = false), новые гости не могут генерироваться, но уже заселившиеся гости могут покинуть свои номера после закрытия отеля. 
